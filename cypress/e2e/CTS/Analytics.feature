Feature: CTS App Analytics

    Scenario: CTS Load Basic Search form on desktop
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search" with added wait
        When page load request is sent
        Then the following parameters should be captured
            | parameter | value                                                                                                                                                                                                                                                                                                                                                                                               |
            | prop1     | {PROTOCOL}://{CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search                                                                                                                                                                                                                                                                                                                              |
            | prop3     | /about-cancer/treatment/clinical-trials/search                                                                                                                                                                                                                                                                                                                                                      |
            | prop6     | Find NCI-Supported Clinical Trials                                                                                                                                                                                                                                                                                                                                                                  |
            | prop8     | english                                                                                                                                                                                                                                                                                                                                                                                             |
            | prop10    | Find NCI-Supported Clinical Trials - NCI                                                                                                                                                                                                                                                                                                                                                            |
            | prop26    | /^\d{4}\|\d{1,2}\|\d{1,2}\|\d{1,2}$/                                                                                                                                                                                                                                                                                                                                                                |
            | prop29    | /(year)=(19\|20)\d{2}\s\|\s(month)=(?:Jan(?:uary)? \|Feb(?:ruary)? \|Mar(?:ch)? \|Apr(?:il)? \|May \|Jun(?:e)? \|Jul(?:y)? \|Aug(?:ust)? \|Sep(?:tember)? \|Oct(?:ober)? \|(Nov \|Dec)(?:ember)?)\s\|\s(date)=\d{1,2}\s\|\s(day)=(?:Sun(?:day)? \|Mon(?:day)? \|Tue(?:sday)? \|Wed(?:nesday)? \|Thu(?:rsday)? \|Fri(?:day)? \|Sat(?:urday))\s\|\s(time)=(1[0-2]\|0?[1-9]):([0-5][0-9]) ?([AP][M]) / |
            | prop44    | Clinical Trials                                                                                                                                                                                                                                                                                                                                                                                     |
            | prop62    | Clinical Trials: Basic                                                                                                                                                                                                                                                                                                                                                                              |
            | prop74    | clinicaltrials_basic\|display                                                                                                                                                                                                                                                                                                                                                                       |
            | evar44    | D=c44                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar2     | D=c8                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar7     | D=c7                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar5     | Desktop                                                                                                                                                                                                                                                                                                                                                                                             |
            | evar62    | D=c62                                                                                                                                                                                                                                                                                                                                                                                               |
            | channel   | About Cancer                                                                                                                                                                                                                                                                                                                                                                                        |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search                                                                                                                                                                                                                                                                                                                                      |
            | hier1     | {CANONICAL_HOST}\|about-cancer\|treatment\|clinical-trials\|search                                                                                                                                                                                                                                                                                                                                  |
            | event1    |                                                                                                                                                                                                                                                                                                                                                                                                     |
            | event47   | /d{0,2}/                                                                                                                                                                                                                                                                                                                                                                                            |


    Scenario: CTS Load Advanced Search form on mobile
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search/advanced"
        And screen breakpoint is set to "mobile"
        When page load request is sent
        Then the following parameters should be captured
            | parameter | value                                                                                                                                                                                                                                                                                                                                                                                               |
            | prop1     | {PROTOCOL}://{CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/advanced                                                                                                                                                                                                                                                                                                                     |
            | prop3     | /about-cancer/treatment/clinical-trials/search/advanced                                                                                                                                                                                                                                                                                                                                             |
            | prop6     | Find NCI-Supported Clinical Trials - Advanced Search                                                                                                                                                                                                                                                                                                                                                |
            | prop8     | english                                                                                                                                                                                                                                                                                                                                                                                             |
            | prop10    | Find NCI-Supported Clinical Trials - Advanced Search - NCI                                                                                                                                                                                                                                                                                                                                          |
            | prop26    | /^\d{4}\|\d{1,2}\|\d{1,2}\|\d{1,2}$/                                                                                                                                                                                                                                                                                                                                                                |
            | prop29    | /(year)=(19\|20)\d{2}\s\|\s(month)=(?:Jan(?:uary)? \|Feb(?:ruary)? \|Mar(?:ch)? \|Apr(?:il)? \|May \|Jun(?:e)? \|Jul(?:y)? \|Aug(?:ust)? \|Sep(?:tember)? \|Oct(?:ober)? \|(Nov \|Dec)(?:ember)?)\s\|\s(date)=\d{1,2}\s\|\s(day)=(?:Sun(?:day)? \|Mon(?:day)? \|Tue(?:sday)? \|Wed(?:nesday)? \|Thu(?:rsday)? \|Fri(?:day)? \|Sat(?:urday))\s\|\s(time)=(1[0-2]\|0?[1-9]):([0-5][0-9]) ?([AP][M]) / |
            | prop44    | Clinical Trials                                                                                                                                                                                                                                                                                                                                                                                     |
            | prop62    | Clinical Trials: Advanced                                                                                                                                                                                                                                                                                                                                                                           |
            | prop74    | clinicaltrials_advanced\|display                                                                                                                                                                                                                                                                                                                                                                    |
            | evar44    | D=c44                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar2     | D=c8                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar7     | D=c7                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar5     | Desktop                                                                                                                                                                                                                                                                                                                                                                                             |
            | evar62    | D=c62                                                                                                                                                                                                                                                                                                                                                                                               |
            | channel   | About Cancer                                                                                                                                                                                                                                                                                                                                                                                        |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/advanced                                                                                                                                                                                                                                                                                                                             |
            | hier1     | {CANONICAL_HOST}\|about-cancer\|treatment\|clinical-trials\|search\|advanced                                                                                                                                                                                                                                                                                                                        |
            | event1    |                                                                                                                                                                                                                                                                                                                                                                                                     |
            | event47   | /d{0,2}/                                                                                                                                                                                                                                                                                                                                                                                            |


    Scenario: CTS Load Basic search results on tablet
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search/r?a=50&loc=0&rl=1&t=C4872"
        And screen breakpoint is set to "tablet"
        And browser waits
        When page load request is sent
        Then the following parameters should be captured
            | parameter | value                                                                                                                                                                                                                                                                                                                                                                                               |
            | prop3     | /about-cancer/treatment/clinical-trials/search/r                                                                                                                                                                                                                                                                                                                                                    |
            | prop6     | Clinical Trials Search Results                                                                                                                                                                                                                                                                                                                                                                      |
            | prop8     | english                                                                                                                                                                                                                                                                                                                                                                                             |
            | prop10    | Clinical Trials Search Results - NCI                                                                                                                                                                                                                                                                                                                                                                |
            | prop11    | clinicaltrials_basic                                                                                                                                                                                                                                                                                                                                                                                |
            | prop15    | t:a                                                                                                                                                                                                                                                                                                                                                                                                 |
            | prop17    | typecondition\|c4872\|50                                                                                                                                                                                                                                                                                                                                                                            |
            | prop18    | all                                                                                                                                                                                                                                                                                                                                                                                                 |
            | prop25    | /^\d{1,2}\/\d{1,2}\/\d{4} - \d{2}:\d{2}/                                                                                                                                                                                                                                                                                                                                                            |
            | prop29    | /(year)=(19\|20)\d{2}\s\|\s(month)=(?:Jan(?:uary)? \|Feb(?:ruary)? \|Mar(?:ch)? \|Apr(?:il)? \|May \|Jun(?:e)? \|Jul(?:y)? \|Aug(?:ust)? \|Sep(?:tember)? \|Oct(?:ober)? \|(Nov \|Dec)(?:ember)?)\s\|\s(date)=\d{1,2}\s\|\s(day)=(?:Sun(?:day)? \|Mon(?:day)? \|Tue(?:sday)? \|Wed(?:nesday)? \|Thu(?:rsday)? \|Fri(?:day)? \|Sat(?:urday))\s\|\s(time)=(1[0-2]\|0?[1-9]):([0-5][0-9]) ?([AP][M]) / |
            | prop44    | Clinical Trials                                                                                                                                                                                                                                                                                                                                                                                     |
            | prop62    | Clinical Trials: Basic                                                                                                                                                                                                                                                                                                                                                                              |
            | evar44    | D=c44                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar2     | D=c8                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar7     | D=c7                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar5     | Tablet                                                                                                                                                                                                                                                                                                                                                                                              |
            | evar62    | D=c62                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar15    | D=c15                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar17    | D=c17                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar18    | D=c18                                                                                                                                                                                                                                                                                                                                                                                               |
            | channel   | About Cancer                                                                                                                                                                                                                                                                                                                                                                                        |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r                                                                                                                                                                                                                                                                                                                                    |
            | hier1     | {CANONICAL_HOST}\|about-cancer\|treatment\|clinical-trials\|search\|r                                                                                                                                                                                                                                                                                                                               |
            | event1    |                                                                                                                                                                                                                                                                                                                                                                                                     |
            | event47   | /d{0,2}/                                                                                                                                                                                                                                                                                                                                                                                            |
            | event2    |                                                                                                                                                                                                                                                                                                                                                                                                     |

    Scenario: CTS Load Advanced search results with cancer type, stage and age specified on desktop
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search/r?a=45&loc=0&rl=2&stg=C94774&t=C4872"
        And browser waits
        When page load request is sent
        Then the following parameters should be captured
            | parameter | value                                                                                                                                                                                                                                                                                                                                                                                               |
            | prop3     | /about-cancer/treatment/clinical-trials/search/r                                                                                                                                                                                                                                                                                                                                                    |
            | prop6     | Clinical Trials Search Results                                                                                                                                                                                                                                                                                                                                                                      |
            | prop8     | english                                                                                                                                                                                                                                                                                                                                                                                             |
            | prop10    | Clinical Trials Search Results - NCI                                                                                                                                                                                                                                                                                                                                                                |
            | prop11    | clinicaltrials_advanced                                                                                                                                                                                                                                                                                                                                                                             |
            | prop15    | t:stg:a                                                                                                                                                                                                                                                                                                                                                                                             |
            | prop17    | c4872\|all\|c94774\|all\|45\|none                                                                                                                                                                                                                                                                                                                                                                   |
            | prop18    | all                                                                                                                                                                                                                                                                                                                                                                                                 |
            | prop19    | all\|none\|none                                                                                                                                                                                                                                                                                                                                                                                     |
            | prop20    | all\|none\|none\|none                                                                                                                                                                                                                                                                                                                                                                               |
            | prop25    | /^\d{1,2}\/\d{1,2}\/\d{4} - \d{2}:\d{2}/                                                                                                                                                                                                                                                                                                                                                            |
            | prop29    | /(year)=(19\|20)\d{2}\s\|\s(month)=(?:Jan(?:uary)? \|Feb(?:ruary)? \|Mar(?:ch)? \|Apr(?:il)? \|May \|Jun(?:e)? \|Jul(?:y)? \|Aug(?:ust)? \|Sep(?:tember)? \|Oct(?:ober)? \|(Nov \|Dec)(?:ember)?)\s\|\s(date)=\d{1,2}\s\|\s(day)=(?:Sun(?:day)? \|Mon(?:day)? \|Tue(?:sday)? \|Wed(?:nesday)? \|Thu(?:rsday)? \|Fri(?:day)? \|Sat(?:urday))\s\|\s(time)=(1[0-2]\|0?[1-9]):([0-5][0-9]) ?([AP][M]) / |
            | prop44    | Clinical Trials                                                                                                                                                                                                                                                                                                                                                                                     |
            | prop62    | Clinical Trials: Advanced                                                                                                                                                                                                                                                                                                                                                                           |
            | evar44    | D=c44                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar2     | D=c8                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar7     | D=c7                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar5     | Desktop                                                                                                                                                                                                                                                                                                                                                                                             |
            | evar62    | D=c62                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar15    | D=c15                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar17    | D=c17                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar18    | D=c18                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar19    | all\|none\|none{or}D=c19                                                                                                                                                                                                                                                                                                                                                                            |
            | evar20    | all\|none\|none\|none{or}D=c20                                                                                                                                                                                                                                                                                                                                                                      |
            | channel   | About Cancer                                                                                                                                                                                                                                                                                                                                                                                        |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r                                                                                                                                                                                                                                                                                                                                    |
            | hier1     | {CANONICAL_HOST}\|about-cancer\|treatment\|clinical-trials\|search\|r                                                                                                                                                                                                                                                                                                                               |
            | event1    |                                                                                                                                                                                                                                                                                                                                                                                                     |
            | event47   | /d{0,2}/                                                                                                                                                                                                                                                                                                                                                                                            |
            | event2    |                                                                                                                                                                                                                                                                                                                                                                                                     |

    Scenario: CTS Load Advanced search results with keyword and location at NIH on desktop
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search/r?loc=4&q=Breast%20Cancer&rl=2"
        And browser waits
        When page load request is sent
        Then the following parameters should be captured
            | parameter | value                                                                                                                                                                                                                                                                                                                                                                                               |
            | prop3     | /about-cancer/treatment/clinical-trials/search/r                                                                                                                                                                                                                                                                                                                                                    |
            | prop6     | Clinical Trials Search Results                                                                                                                                                                                                                                                                                                                                                                      |
            | prop8     | english                                                                                                                                                                                                                                                                                                                                                                                             |
            | prop10    | Clinical Trials Search Results - NCI                                                                                                                                                                                                                                                                                                                                                                |
            | prop11    | clinicaltrials_advanced                                                                                                                                                                                                                                                                                                                                                                             |
            | prop15    | q:loc                                                                                                                                                                                                                                                                                                                                                                                               |
            | prop17    | all\|all\|all\|all\|none\|breast cancer                                                                                                                                                                                                                                                                                                                                                             |
            | prop18    | at nih                                                                                                                                                                                                                                                                                                                                                                                              |
            | prop19    | all\|none\|none                                                                                                                                                                                                                                                                                                                                                                                     |
            | prop20    | all\|none\|none\|none                                                                                                                                                                                                                                                                                                                                                                               |
            | prop25    | /^\d{1,2}\/\d{1,2}\/\d{4} - \d{2}:\d{2}/                                                                                                                                                                                                                                                                                                                                                            |
            | prop29    | /(year)=(19\|20)\d{2}\s\|\s(month)=(?:Jan(?:uary)? \|Feb(?:ruary)? \|Mar(?:ch)? \|Apr(?:il)? \|May \|Jun(?:e)? \|Jul(?:y)? \|Aug(?:ust)? \|Sep(?:tember)? \|Oct(?:ober)? \|(Nov \|Dec)(?:ember)?)\s\|\s(date)=\d{1,2}\s\|\s(day)=(?:Sun(?:day)? \|Mon(?:day)? \|Tue(?:sday)? \|Wed(?:nesday)? \|Thu(?:rsday)? \|Fri(?:day)? \|Sat(?:urday))\s\|\s(time)=(1[0-2]\|0?[1-9]):([0-5][0-9]) ?([AP][M]) / |
            | prop44    | Clinical Trials                                                                                                                                                                                                                                                                                                                                                                                     |
            | prop62    | Clinical Trials: Advanced                                                                                                                                                                                                                                                                                                                                                                           |
            | evar44    | D=c44                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar2     | D=c8                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar7     | D=c7                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar5     | Desktop                                                                                                                                                                                                                                                                                                                                                                                             |
            | evar62    | D=c62                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar15    | D=c15                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar17    | D=c17                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar18    | D=c18                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar19    | all\|none\|none{or}D=c19                                                                                                                                                                                                                                                                                                                                                                            |
            | evar20    | all\|none\|none\|none{or}D=c20                                                                                                                                                                                                                                                                                                                                                                      |
            | channel   | About Cancer                                                                                                                                                                                                                                                                                                                                                                                        |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r                                                                                                                                                                                                                                                                                                                                    |
            | hier1     | {CANONICAL_HOST}\|about-cancer\|treatment\|clinical-trials\|search\|r                                                                                                                                                                                                                                                                                                                               |
            | event1    |                                                                                                                                                                                                                                                                                                                                                                                                     |
            | event47   | /d{0,2}/                                                                                                                                                                                                                                                                                                                                                                                            |
            | event2    |                                                                                                                                                                                                                                                                                                                                                                                                     |

    Scenario: CTS Load Advanced search results with state and city specified, trial types and phase on mobile
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search/r?lcnty=United%20States&lcty=Los%20Angeles&loc=2&lst=CA&rl=2&tp=i&tp=iv&tt=treatment&tt=diagnostic"
        And screen breakpoint is set to "mobile"
        And browser waits
        When page load request is sent
        Then the following parameters should be captured
            | parameter | value                                                                                                                                                                                                                                                                                                                                                                                               |
            | prop3     | /about-cancer/treatment/clinical-trials/search/r                                                                                                                                                                                                                                                                                                                                                    |
            | prop6     | Clinical Trials Search Results                                                                                                                                                                                                                                                                                                                                                                      |
            | prop8     | english                                                                                                                                                                                                                                                                                                                                                                                             |
            | prop10    | Clinical Trials Search Results - NCI                                                                                                                                                                                                                                                                                                                                                                |
            | prop11    | clinicaltrials_advanced                                                                                                                                                                                                                                                                                                                                                                             |
            | prop15    | loc:lcnty:lst:lcty:tt:tp                                                                                                                                                                                                                                                                                                                                                                            |
            | prop17    | all\|all\|all\|all\|none\|none                                                                                                                                                                                                                                                                                                                                                                      |
            | prop18    | csc\|united states\|ca\|los angeles                                                                                                                                                                                                                                                                                                                                                                 |
            | prop19    | tre,dia\|none\|none                                                                                                                                                                                                                                                                                                                                                                                 |
            | prop20    | i,iv\|none\|none\|none                                                                                                                                                                                                                                                                                                                                                                              |
            | prop25    | /^\d{1,2}\/\d{1,2}\/\d{4} - \d{2}:\d{2}/                                                                                                                                                                                                                                                                                                                                                            |
            | prop29    | /(year)=(19\|20)\d{2}\s\|\s(month)=(?:Jan(?:uary)? \|Feb(?:ruary)? \|Mar(?:ch)? \|Apr(?:il)? \|May \|Jun(?:e)? \|Jul(?:y)? \|Aug(?:ust)? \|Sep(?:tember)? \|Oct(?:ober)? \|(Nov \|Dec)(?:ember)?)\s\|\s(date)=\d{1,2}\s\|\s(day)=(?:Sun(?:day)? \|Mon(?:day)? \|Tue(?:sday)? \|Wed(?:nesday)? \|Thu(?:rsday)? \|Fri(?:day)? \|Sat(?:urday))\s\|\s(time)=(1[0-2]\|0?[1-9]):([0-5][0-9]) ?([AP][M]) / |
            | prop44    | Clinical Trials                                                                                                                                                                                                                                                                                                                                                                                     |
            | prop62    | Clinical Trials: Advanced                                                                                                                                                                                                                                                                                                                                                                           |
            | evar44    | D=c44                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar2     | D=c8                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar7     | D=c7                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar5     | Mobile                                                                                                                                                                                                                                                                                                                                                                                              |
            | evar62    | D=c62                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar15    | D=c15                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar17    | D=c17                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar18    | D=c18                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar19    | tre,dia\|none\|none{or}D=c19                                                                                                                                                                                                                                                                                                                                                                        |
            | evar20    | i,iv\|none\|none\|none{or}D=c20                                                                                                                                                                                                                                                                                                                                                                     |
            | channel   | About Cancer                                                                                                                                                                                                                                                                                                                                                                                        |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r                                                                                                                                                                                                                                                                                                                                    |
            | hier1     | {CANONICAL_HOST}\|about-cancer\|treatment\|clinical-trials\|search\|r                                                                                                                                                                                                                                                                                                                               |
            | event1    |                                                                                                                                                                                                                                                                                                                                                                                                     |
            | event47   | /d{0,2}/                                                                                                                                                                                                                                                                                                                                                                                            |
            | event2    |                                                                                                                                                                                                                                                                                                                                                                                                     |

    Scenario: CTS Load Advanced search results with drug and other treatment on tablet
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search/r?d=C2039&i=C15313&loc=0&rl=2"
        And screen breakpoint is set to "tablet"
        And browser waits
        When page load request is sent
        Then the following parameters should be captured
            | parameter | value                                                                                                                                                                                                                                                                                                                                                                                               |
            | prop3     | /about-cancer/treatment/clinical-trials/search/r                                                                                                                                                                                                                                                                                                                                                    |
            | prop6     | Clinical Trials Search Results                                                                                                                                                                                                                                                                                                                                                                      |
            | prop8     | english                                                                                                                                                                                                                                                                                                                                                                                             |
            | prop10    | Clinical Trials Search Results - NCI                                                                                                                                                                                                                                                                                                                                                                |
            | prop11    | clinicaltrials_advanced                                                                                                                                                                                                                                                                                                                                                                             |
            | prop15    | d:i                                                                                                                                                                                                                                                                                                                                                                                                 |
            | prop17    | all\|all\|all\|all\|none\|none                                                                                                                                                                                                                                                                                                                                                                      |
            | prop18    | all                                                                                                                                                                                                                                                                                                                                                                                                 |
            | prop19    | all\|c2039\|c15313                                                                                                                                                                                                                                                                                                                                                                                  |
            | prop20    | all\|none\|none\|none                                                                                                                                                                                                                                                                                                                                                                               |
            | prop25    | /^\d{1,2}\/\d{1,2}\/\d{4} - \d{2}:\d{2}/                                                                                                                                                                                                                                                                                                                                                            |
            | prop29    | /(year)=(19\|20)\d{2}\s\|\s(month)=(?:Jan(?:uary)? \|Feb(?:ruary)? \|Mar(?:ch)? \|Apr(?:il)? \|May \|Jun(?:e)? \|Jul(?:y)? \|Aug(?:ust)? \|Sep(?:tember)? \|Oct(?:ober)? \|(Nov \|Dec)(?:ember)?)\s\|\s(date)=\d{1,2}\s\|\s(day)=(?:Sun(?:day)? \|Mon(?:day)? \|Tue(?:sday)? \|Wed(?:nesday)? \|Thu(?:rsday)? \|Fri(?:day)? \|Sat(?:urday))\s\|\s(time)=(1[0-2]\|0?[1-9]):([0-5][0-9]) ?([AP][M]) / |
            | prop44    | Clinical Trials                                                                                                                                                                                                                                                                                                                                                                                     |
            | prop62    | Clinical Trials: Advanced                                                                                                                                                                                                                                                                                                                                                                           |
            | evar44    | D=c44                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar2     | D=c8                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar7     | D=c7                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar5     | Tablet                                                                                                                                                                                                                                                                                                                                                                                              |
            | evar62    | D=c62                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar15    | D=c15                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar17    | D=c17                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar18    | D=c18                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar19    | all\|c2039\|c15313{or}D=c19                                                                                                                                                                                                                                                                                                                                                                         |
            | evar20    | all\|none\|none\|none{or}D=c20                                                                                                                                                                                                                                                                                                                                                                      |
            | channel   | About Cancer                                                                                                                                                                                                                                                                                                                                                                                        |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r                                                                                                                                                                                                                                                                                                                                    |
            | hier1     | {CANONICAL_HOST}\|about-cancer\|treatment\|clinical-trials\|search\|r                                                                                                                                                                                                                                                                                                                               |
            | event1    |                                                                                                                                                                                                                                                                                                                                                                                                     |
            | event47   | /d{0,2}/                                                                                                                                                                                                                                                                                                                                                                                            |
            | event2    |                                                                                                                                                                                                                                                                                                                                                                                                     |

    Scenario: CTS Load Advanced search results with lead org on mobile
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search/r?lo=ECOG-ACRIN%20Cancer%20Research%20Group&loc=0&rl=2"
        And screen breakpoint is set to "mobile"
        And browser waits
        When page load request is sent
        Then the following parameters should be captured
            | parameter | value                                                                                                                                                                                                                                                                                                                                                                                               |
            | prop3     | /about-cancer/treatment/clinical-trials/search/r                                                                                                                                                                                                                                                                                                                                                    |
            | prop6     | Clinical Trials Search Results                                                                                                                                                                                                                                                                                                                                                                      |
            | prop8     | english                                                                                                                                                                                                                                                                                                                                                                                             |
            | prop10    | Clinical Trials Search Results - NCI                                                                                                                                                                                                                                                                                                                                                                |
            | prop11    | clinicaltrials_advanced                                                                                                                                                                                                                                                                                                                                                                             |
            | prop15    | lo                                                                                                                                                                                                                                                                                                                                                                                                  |
            | prop17    | all\|all\|all\|all\|none\|none                                                                                                                                                                                                                                                                                                                                                                      |
            | prop18    | all                                                                                                                                                                                                                                                                                                                                                                                                 |
            | prop19    | all\|none\|none                                                                                                                                                                                                                                                                                                                                                                                     |
            | prop20    | all\|none\|none\|ecog-acrin cancer research group                                                                                                                                                                                                                                                                                                                                                   |
            | prop25    | /^\d{1,2}\/\d{1,2}\/\d{4} - \d{2}:\d{2}/                                                                                                                                                                                                                                                                                                                                                            |
            | prop29    | /(year)=(19\|20)\d{2}\s\|\s(month)=(?:Jan(?:uary)? \|Feb(?:ruary)? \|Mar(?:ch)? \|Apr(?:il)? \|May \|Jun(?:e)? \|Jul(?:y)? \|Aug(?:ust)? \|Sep(?:tember)? \|Oct(?:ober)? \|(Nov \|Dec)(?:ember)?)\s\|\s(date)=\d{1,2}\s\|\s(day)=(?:Sun(?:day)? \|Mon(?:day)? \|Tue(?:sday)? \|Wed(?:nesday)? \|Thu(?:rsday)? \|Fri(?:day)? \|Sat(?:urday))\s\|\s(time)=(1[0-2]\|0?[1-9]):([0-5][0-9]) ?([AP][M]) / |
            | prop44    | Clinical Trials                                                                                                                                                                                                                                                                                                                                                                                     |
            | prop62    | Clinical Trials: Advanced                                                                                                                                                                                                                                                                                                                                                                           |
            | evar44    | D=c44                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar2     | D=c8                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar7     | D=c7                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar5     | Mobile                                                                                                                                                                                                                                                                                                                                                                                              |
            | evar62    | D=c62                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar15    | D=c15                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar17    | D=c17                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar18    | D=c18                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar19    | all\|none\|none{or}D=c19                                                                                                                                                                                                                                                                                                                                                                            |
            | evar20    | all\|none\|none\|ecog-acrin cancer research group{or}D=c20                                                                                                                                                                                                                                                                                                                                          |
            | channel   | About Cancer                                                                                                                                                                                                                                                                                                                                                                                        |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r                                                                                                                                                                                                                                                                                                                                    |
            | hier1     | {CANONICAL_HOST}\|about-cancer\|treatment\|clinical-trials\|search\|r                                                                                                                                                                                                                                                                                                                               |
            | event1    |                                                                                                                                                                                                                                                                                                                                                                                                     |
            | event47   | /d{0,2}/                                                                                                                                                                                                                                                                                                                                                                                            |
            | event2    |                                                                                                                                                                                                                                                                                                                                                                                                     |


    ############# Trial Description Page ##############


    Scenario: Page Load event fires when user navigates to trial description page on desktop
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search/v?id=NCI-2015-01918&loc=0&rl=1"
        And browser waits
        When page load request is sent
        Then the following parameters should be captured
            | parameter | value                                                                                                                                                                                                                                                                                                                                                                                               |
            | prop3     | /about-cancer/treatment/clinical-trials/search/v                                                                                                                                                                                                                                                                                                                                                    |
            | prop6     | Weight Loss Interventions in Treating Overweight and Obese Women with a Higher Risk for Breast Cancer Recurrence                                                                                                                                                                                                                                                                                    |
            | prop8     | english                                                                                                                                                                                                                                                                                                                                                                                             |
            | prop10    | Weight Loss Interventions in Treating Overweight and Obese Women with a Higher Risk for Breast Cancer Recurrence                                                                                                                                                                                                                                                                                    |
            | prop16    | NCT02750826                                                                                                                                                                                                                                                                                                                                                                                         |
            | prop25    | /^\d{1,2}\/\d{1,2}\/\d{4} - \d{2}:\d{2}/                                                                                                                                                                                                                                                                                                                                                            |
            | prop29    | /(year)=(19\|20)\d{2}\s\|\s(month)=(?:Jan(?:uary)? \|Feb(?:ruary)? \|Mar(?:ch)? \|Apr(?:il)? \|May \|Jun(?:e)? \|Jul(?:y)? \|Aug(?:ust)? \|Sep(?:tember)? \|Oct(?:ober)? \|(Nov \|Dec)(?:ember)?)\s\|\s(date)=\d{1,2}\s\|\s(day)=(?:Sun(?:day)? \|Mon(?:day)? \|Tue(?:sday)? \|Wed(?:nesday)? \|Thu(?:rsday)? \|Fri(?:day)? \|Sat(?:urday))\s\|\s(time)=(1[0-2]\|0?[1-9]):([0-5][0-9]) ?([AP][M]) / |
            | prop44    | Clinical Trials                                                                                                                                                                                                                                                                                                                                                                                     |
            | prop62    | Clinical Trials: Basic                                                                                                                                                                                                                                                                                                                                                                              |
            | evar44    | D=c44                                                                                                                                                                                                                                                                                                                                                                                               |
            | evar2     | D=c8                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar7     | D=c7                                                                                                                                                                                                                                                                                                                                                                                                |
            | evar5     | Desktop                                                                                                                                                                                                                                                                                                                                                                                             |
            | evar62    | D=c62                                                                                                                                                                                                                                                                                                                                                                                               |
            | channel   | About Cancer                                                                                                                                                                                                                                                                                                                                                                                        |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/v                                                                                                                                                                                                                                                                                                                                    |
            | hier1     | {CANONICAL_HOST}\|about-cancer\|treatment\|clinical-trials\|search\|v                                                                                                                                                                                                                                                                                                                               |
            | event1    |                                                                                                                                                                                                                                                                                                                                                                                                     |
            | event47   | /d{0,2}/                                                                                                                                                                                                                                                                                                                                                                                            |

    Scenario: Click event fires when user clicks on Print link on trial description page on desktop
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search/v?id=NCI-2015-01918&loc=0&rl=1"
        And browser waits
        When user clicks on share by "Print" button
        And browser waits
        And page click request is sent
        Then the following parameters should be captured
            | parameter | value                                                                                                 |
            | event17   |                                                                                                       |
            | pev2      | UnknownLinkName                                                                                       |
            | linkType  | lnk_o                                                                                                 |
            | prop67    | D=pageName                                                                                            |
            | prop4     | D=pev1                                                                                                |
            | prop5     | print\|{CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/v                               |
            | prop43    | print                                                                                                 |
            | prop66    | print                                                                                                 |
            | evar2     | D=c8                                                                                                  |
            | pageURL   | {PROTOCOL}://{CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/v?id=NCI-2015-01918&loc=0&rl=1 |

    # This needs work - right now we need to ensure it does not wait for a page load
    # Scenario: Click event fires when user clicks on Email link on trial description page
    #     Given user is navigating to "/about-cancer/treatment/clinical-trials/search/v?id=NCI-2015-01918&loc=0&rl=1"
    #     And screen breakpoint is set to "desktop"
    #     When user clicks on share by "Email" button
    #     And page click request is sent
    #     Then the following parameters should be captured
    #         | parameter | value                                                                                                 |
    #         | link      | Email this trial                                                                                      |
    #         | event17   |                                                                                                       |
    #         | pev2      | UnknownLinkName                                                                                       |
    #         | linkType  | lnk_o                                                                                                 |
    #         | prop67    | D=pageName                                                                                            |
    #         | prop4     | D=pev1                                                                                                |
    #         | prop5     | email\|{CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/v                               |
    #         | prop8     | english                                                                                               |
    #         | prop43    | email                                                                                                 |
    #         | prop66    | email                                                                                                 |
    #         | evar2     | D=c8                                                                                                  |
    #         | pageURL   | {PROTOCOL}://{CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/v?id=NCI-2015-01918&loc=0&rl=1 |
    #         | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/v                                      |


    ############ Click Events ##############


    Scenario: Click Events for start over link
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search/r?a=45&loc=0&rl=2"
        And screen breakpoint is set to "mobile"
        And browser waits
        When user clicks on "Start Over" link
        And browser waits
        And page click request is sent
        Then the following parameters should be captured
            | parameter | value                                                                                    |
            | link      | Start Over                                                                               |
            | event49   |                                                                                          |
            | pev2      | CTStartOverClick                                                                         |
            | linkType  | lnk_o                                                                                    |
            | prop67    | D=pageName                                                                               |
            | prop4     | D=pev1                                                                                   |
            | prop8     | english                                                                                  |
            | prop74    | clinicaltrials_advanced\|start over                                                      |
            | evar2     | D=c8                                                                                     |
            | evar47    | clinicaltrials_advanced                                                                  |
            | pageURL   | {PROTOCOL}://{CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r?a=45&loc=0&rl=2 |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r                         |

    Scenario: Click Events for Find Trials button
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search/advanced"
        And screen breakpoint is set to "mobile"
        When user clicks on "Find Trials" button
        And page click request is sent
        Then the following parameters should be captured
            | parameter | value                                                                           |
            | link      | Find Trials                                                                     |
            | event39   |                                                                                 |
            | pev2      | formAnalysis\|clinicaltrials_advanced\|complete                                 |
            | linkType  | lnk_o                                                                           |
            | prop67    | D=pageName                                                                      |
            | prop4     | D=pev1                                                                          |
            | prop8     | english                                                                         |
            | prop74    | clinicaltrials_advanced\|complete                                               |
            | evar2     | D=c8                                                                            |
            | evar47    | clinicaltrials_advanced                                                         |
            | pageURL   | {PROTOCOL}://{CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/advanced |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/advanced         |

    Scenario: Click Events fires when user starts interacting with a form
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search/advanced"
        And screen breakpoint is set to "mobile"
        When user clicks on "All" button
        And user types "c" in "Primary Cancer Type/Condition" field
        Then page click request is sent
        And the following parameters should be captured
            | parameter | value                                                                           |
            | link      | All                                                                             |
            | event38   |                                                                                 |
            | pev2      | formAnalysis\|clinicaltrials_advanced\|start                                    |
            | linkType  | lnk_o                                                                           |
            | prop67    | D=pageName                                                                      |
            | prop4     | D=pev1                                                                          |
            | prop8     | english                                                                         |
            | prop74    | clinicaltrials_advanced\|start                                                  |
            | evar2     | D=c8                                                                            |
            | evar47    | clinicaltrials_advanced                                                         |
            | pageURL   | {PROTOCOL}://{CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/advanced |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/advanced         |



    # This needs work - the event is gone after reloadig the page
    # Scenario: Click Events for Clear Form button
    #     Given user is navigating to "/about-cancer/treatment/clinical-trials/search/advanced"
    #     When user clears form
    #     And page click request is sent
    #     Then the following parameters should be captured
    #         | parameter | value                                                                           |
    #         | link      | Clear Form                                                                      |
    #         | event68   |                                                                                 |
    #         | pev2      | clinicaltrials_advanced\|clear                                                  |
    #         | linkType  | lnk_o                                                                           |
    #         | prop67    | D=pageName                                                                      |
    #         | prop4     | D=pev1                                                                          |
    #         | prop8     | english                                                                         |
    #         | prop74    | clinicaltrials_advanced\|clear                                                  |
    #         | evar2     | D=c8                                                                            |
    #         | evar47    | clinicaltrials_advanced                                                         |
    #         | pageURL   | {PROTOCOL}://{CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/advanced |
    #         | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/advanced         |

    Scenario: Click Events for select all on page and print
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search/r?loc=0&rl=2"
        And screen breakpoint is set to "tablet"
        When user checks "Select all on page" checkbox
        And user clicks on "Print Selected" button
        And page click request is sent
        Then the following parameters should be captured
            | parameter | value                                                                               |
            | link      | Print Selected                                                                      |
            | event48   |                                                                                     |
            | pev2      | CTSResultsPrintSelectedClick                                                        |
            | linkType  | lnk_o                                                                               |
            | prop67    | D=pageName                                                                          |
            | prop4     | D=pev1                                                                              |
            | prop8     | english                                                                             |
            | prop74    | clinicaltrials_advanced\|print selected                                             |
            | prop21    | CTSPrintSelected_top_true_10_1                                                      |
            | evar2     | D=c8                                                                                |
            | pageURL   | {PROTOCOL}://{CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r?loc=0&rl=2 |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r                    |



    Scenario: Click event fires when user inputs invalid age and submits form
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search"
        And screen breakpoint is set to "desktop"
        When user types "234" in "age" field
        And user clicks on "Find Trials" button
        Then page click request is sent
        And the following parameters should be captured
            | parameter | value                                                                  |
            | link      | Find Trials                                                            |
            | event41   |                                                                        |
            | pev2      | formAnalysis\|clinicaltrials_basic\|error                              |
            | linkType  | lnk_o                                                                  |
            | prop67    | D=pageName                                                             |
            | prop4     | D=pev1                                                                 |
            | prop8     | english                                                                |
            | prop74    | clinicaltrials_basic\|error                                            |
            | prop75    | submit\|attempted form submit with errors\|a                           |
            | evar2     | D=c8                                                                   |
            | evar47    | clinicaltrials_basic                                                   |
            | pageURL   | {PROTOCOL}://{CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search         |

    Scenario: Click Events fires when user clicks on search result item from Advanced Search results page
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search/r?loc=0&rl=2"
        And screen breakpoint is set to "mobile"
        When user clicks on 1 trial result
        And browser waits
        Then page click request is sent
        And the following parameters should be captured
            | parameter | value                                                                               |
            | event42   |                                                                                     |
            | pev2      | UnknownLinkName                                                                     |
            | linkType  | lnk_o                                                                               |
            | prop67    | D=pageName                                                                          |
            | prop4     | D=pev1                                                                              |
            | prop8     | english                                                                             |
            | prop12    | clinicaltrials_advanced                                                             |
            | prop13    | 1\|page 1                                                                           |
            | evar2     | D=c8                                                                                |
            | evar12    | D=c12                                                                               |
            | pageURL   | {PROTOCOL}://{CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r?loc=0&rl=2 |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r                    |

    Scenario: Click Events for modify search criteria link
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search/r?a=45&loc=0&rl=2"
        And screen breakpoint is set to "mobile"
        When user clicks on "Modify Search Criteria" button
        And browser waits
        And page click request is sent
        Then the following parameters should be captured
            | parameter | value                                                                                    |
            | link      | Modify Search Criteria                                                                   |
            | event49   |                                                                                          |
            | pev2      | CTSModifyClick                                                                           |
            | linkType  | lnk_o                                                                                    |
            | prop67    | D=pageName                                                                               |
            | prop4     | D=pev1                                                                                   |
            | prop8     | english                                                                                  |
            | prop74    | clinicaltrials_advanced\|modify                                                          |
            | evar2     | D=c8                                                                                     |
            | evar47    | clinicaltrials_advanced                                                                  |
            | pageURL   | {PROTOCOL}://{CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r?a=45&loc=0&rl=2 |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r                         |

    Scenario: Click event fires when user tries to print without selecting any trial
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search/r?loc=0&rl=2"
        And screen breakpoint is set to "desktop"
        When user clicks on "Print Selected" button
        And browser waits
        Then page click request is sent
        And the following parameters should be captured
            | parameter | value                                                                               |
            | link      | Print Selected                                                                      |
            | event41   |                                                                                     |
            | pev2      | CTSResultsSelectedErrorClick                                                        |
            | linkType  | lnk_o                                                                               |
            | prop67    | D=pageName                                                                          |
            | prop4     | D=pev1                                                                              |
            | prop8     | english                                                                             |
            | prop74    | clinicaltrials_advanced\|error                                                      |
            | prop75    | printselected\|noneselected                                                         |
            | evar2     | D=c8                                                                                |
            | pageURL   | {PROTOCOL}://{CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r?loc=0&rl=2 |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r                    |


    Scenario: Click event fires when user reaches max number of selected trials
        Given user is navigating to "/about-cancer/treatment/clinical-trials/search/r?loc=0&rl=2"
        And screen breakpoint is set to "desktop"
        And browser waits
        When user checks "Select all on page" checkbox on 11 pages
        And browser waits
        Then page click request is sent
        And the following parameters should be captured
            | parameter | value                                                                               |
            | event41   |                                                                                     |
            | pev2      | CTSResultsSelectedErrorClick                                                        |
            | linkType  | lnk_o                                                                               |
            | prop67    | D=pageName                                                                          |
            | prop4     | D=pev1                                                                              |
            | prop8     | english                                                                             |
            | prop74    | clinicaltrials_advanced\|error                                                      |
            | prop75    | printselected\|maxselectionreached                                                  |
            | evar2     | D=c8                                                                                |
            | pageURL   | {PROTOCOL}://{CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r?loc=0&rl=2 |
            | pageName  | {CANONICAL_HOST}/about-cancer/treatment/clinical-trials/search/r                    |
